### ch01 审阅报告（已完成）

#### 概览
- **章节**: ch01
- **小节清单与定位**:
  - ch01/1_1_crisis_opportunity.qmd
  - ch01/1_2_player_to_designer.qmd
  - ch01/1_3_vibe_coding_paradigm.qmd
  - ch01/1_4_vibe_coding_practice.qmd
  - ch01/1_5_exercises.qmd
- **总体评估**:
  - **FP（第一性原理）**: 3/4（论证链条清晰，案例支撑充分；可补“度量与验证”细节）
  - **VC（Vibe Coding）**: 4/4（身份转变+方法论+实践+练习形成闭环）
  - **BP（最佳实践）**: 3/4（已倡导 Pipeline/度量/权衡；可补不平衡学习、阈值调优、漂移监控与版本针定）
  - **一句话结论**: 叙事实证扎实，Vibe Coding 框架完整，建议补充若干 2024–2025 实操规范与参考链接以增强可落地性。

#### 证据与问题（按小节）
- 1_1_crisis_opportunity（`ch01/1_1_crisis_opportunity.qmd`）
  - 关键论断：AI 能快速生成“70%骨架”，但在数据对齐、代价不对称、概念漂移等“30%关键处置”上易翻车。
  - 证据链接（网络搜索 / Context7）：
    - Pipeline 防泄漏与交叉验证一致性：[scikit-learn Pipeline 用户指南](https://scikit-learn.org/stable/modules/compose.html#pipeline)
    - 分类度量与代价不对称（precision/recall/Fβ、PR 曲线、定制打分）：[scikit-learn Metrics](https://scikit-learn.org/stable/modules/model_evaluation.html)
    - 概念漂移监控（ADWIN/DDM/KSWIN 等）：[River Drift 模块](https://riverml.xyz/latest/api/drift/)
  - 风险与边界：
    - 以准确率为单一目标，无视 FP/FN 代价不对称；
    - 无阈值调优/阈值随业务策略动态变化；
    - 无漂移告警/回归策略，历史静态集上训练难以应对市场促销等冲击。

- 1_2_player_to_designer（`ch01/1_2_player_to_designer.qmd`）
  - 关键论断：从“代码玩家”转向“系统设计师”，工作重心转为问题定义、系统权衡与可验证的稳健性。
  - 证据链接：
    - 规约驱动/提示到实现的可视化与可验证闭环：见上文 Pipeline/度量文档；
    - sklearn 元数据路由（fit/score 等对 `sample_weight` 等元数据的显式请求）提升可控性：[Metadata routing](https://scikit-learn.org/stable/metadata_routing.html)
  - 风险与边界：建议加入“团队工序落地图”（角色—规约—审阅—回归—上线），避免只停留在理念层面。

- 1_3_vibe_coding_paradigm（`ch01/1_3_vibe_coding_paradigm.qmd`）
  - 关键论断：AI 作为起草者，人类作为架构与优化者，第一性原理作为安全网。
  - 证据链接：
    - sklearn Pipeline/ColumnTransformer/FeatureUnion 形成“从原始数据到预测”的可组合流水线：[Pipeline 组合](https://scikit-learn.org/stable/modules/compose.html)
    - 分类阈值调优组件（阈值即策略）：[TunedThresholdClassifierCV](https://scikit-learn.org/stable/modules/classification_threshold.html)
  - 风险与边界：建议在图示中补充“回路中的度量与验收门”，例如“业务指标守门 + 统计指标守门”。

- 1_4_vibe_coding_practice（`ch01/1_4_vibe_coding_practice.qmd`）
  - 关键论断：以 Telco Churn 任务演示“AI 起草→人类优化”的闭环；强调 Pipeline、防泄漏、度量选择、模型替换与不平衡处理。
  - 证据链接：
    - 防泄漏与交叉验证一致性（Pipeline）：[sklearn 常见陷阱](https://scikit-learn.org/stable/common_pitfalls.html)
    - 不平衡处理：`class_weight='balanced'`、`compute_sample_weight`、以及 HGB 的 `class_weight`/`sample_weight`：[HistGradientBoostingClassifier](https://scikit-learn.org/stable/modules/ensemble.html#histgradientboosting)
    - 阈值调优：TunedThresholdClassifierCV/[make_scorer](https://scikit-learn.org/stable/modules/model_evaluation.html#scoring-parameter)
    - 漂移监控：River ADWIN/DDM/KSWIN 等
  - 风险与边界：
    - 练习目前以 Accuracy/报告为主，建议引导读者按“代价不对称”选择目标（如 Recall 或 Fβ）；
    - 建议在实践小节直接给出 Pipeline 轮廓与权重示例，降低上手门槛。

  - 建议的 Pipeline 轮廓（示意）：
    ```python
    from sklearn.compose import ColumnTransformer
    from sklearn.preprocessing import OneHotEncoder, StandardScaler
    from sklearn.pipeline import make_pipeline
    from sklearn.linear_model import LogisticRegression
    from sklearn.ensemble import HistGradientBoostingClassifier
    from sklearn.utils.class_weight import compute_sample_weight

    preprocessor = ColumnTransformer(
        [
            ("num", StandardScaler(), num_cols),
            ("cat", OneHotEncoder(handle_unknown="ignore"), cat_cols),
        ]
    )

    # 方案A：逻辑回归 + 类权重
    clf_lr = make_pipeline(
        preprocessor,
        LogisticRegression(max_iter=200, class_weight="balanced")
    )

    # 方案B：HGB + 类权重
    clf_hgb = make_pipeline(
        preprocessor,
        HistGradientBoostingClassifier(class_weight="balanced", random_state=0)
    )

    # 如需样本权重：sample_weight = compute_sample_weight("balanced", y_train)
    ```

- 1_5_exercises（`ch01/1_5_exercises.qmd`）
  - 关键论断：通过提示工程、反思日志与时事评论，深化对“AI 盲点与人类价值”的体感。
  - 证据链接：
    - 提示工程与结构化输出框架：与本书广义原则一致；
    - 可加入“度量与阈值调优”的练习延展，贴合生产问题。
  - 风险与边界：建议为每题添加“可验收的最小提交物（截图/代码片段/指标表）与评分rubric”。

#### 修订建议与优先级
- **P0（阻断/错误/过时）**：
  - 无明显错误；建议在实践小节明确声明“请使用 Pipeline 避免泄漏”，否则读者可能在本地实现中走偏。

- **P1（重要提升/一致性）**：
  - 在 1.4 实践中：
    - 明确不平衡策略（`class_weight`/`compute_sample_weight`）与何时二选一；
    - 增补“阈值调优”示例（用 TunedThresholdClassifierCV 或手动扫描阈值+业务代价函数）；
    - 补充“概念漂移监控最小示例”（如以 River 的 ADWIN 对预测残差流监测，触发再训练提示）。
  - 在 1.3 图中增加“验收门（业务+统计）”，呼应第一性原理的“可验证性”。
  - 在 1.2 增补团队落地示意（角色→规约→审阅→回归→上线→监控）。

- **P2（打磨/风格）**：
  - 在 1.5 练习为每题配置“提交物与评分rubric”；
  - 在所有小节统一术语：如“阈值调优”“样本权重/类权重”“数据泄漏”等。

#### 资源与可复现性
- 代码/数据/环境：
  - 建议在仓库根或 `book/code/` 增加 `requirements.txt`（例如：`python>=3.10, scikit-learn~=1.7, pandas, numpy, river`），并在 1.4 给出最小可运行脚本链接；
  - Kaggle Telco 数据集建议提供本地替代链接或下载指引，避免课堂/企业网络限制；
  - 给出随机种子与版本针定，确保课堂演示复现。
- 资产检查（图/HTML/外链）：
  - 外链（Kaggle/文档）建议在 CI 中做 200 健康检查；
  - Mermaid 图在构建后人工抽检渲染效果。

#### 术语与引用
- 术语表与跨章统一：
  - “数据泄漏”“概念漂移”“类权重/样本权重”“阈值调优”“业务代价函数”。
- 参考文献与官方链接（访问日期 2025-08）：
  - [scikit-learn Pipeline](https://scikit-learn.org/stable/modules/compose.html)
  - [scikit-learn Metrics / Scoring](https://scikit-learn.org/stable/modules/model_evaluation.html)
  - [scikit-learn Classification threshold tuning](https://scikit-learn.org/stable/modules/classification_threshold.html)
  - [HistGradientBoostingClassifier（类/样本权重）](https://scikit-learn.org/stable/modules/ensemble.html#histgradientboosting)
  - [River Drift 检测](https://riverml.xyz/latest/api/drift/)

#### 状态与动作
- 审核状态：已完成（ch01 全部 5 节）
- 责任人 / 截止时间：AI 助理 / 本周
- 变更记录：新增 FP/VC/BP 打分与修订清单，补充实践建议与官方文档链接。


