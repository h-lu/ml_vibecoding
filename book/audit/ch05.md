### ch05 审阅报告（已完成）

#### 概览
- **章节**: ch05（第五章：回归问题——线性模型的优雅与局限）
- **小节清单与定位**:
  - ch05/5_1_business_challenge.qmd
  - ch05/5_2_linear_regression.qmd
  - ch05/5_3_overfitting_regularization.qmd
  - ch05/5_4_xai.qmd
  - ch05/5_5_vibe_coding_practice.qmd
  - ch05/5_6_exercises.qmd
- **总体评估**:
  - **FP（第一性原理）**: 4/4（从特征空间函数拟合→最小二乘→正则化信息论→解释性，推理链完整）
  - **VC（Vibe Coding）**: 4/4（交互资产+端到端实践+业务对齐问题设计）
  - **BP（最佳实践）**: 3/4（整体对齐 2024–2025；建议补充 Pipeline/ColumnTransformer、一致的预渲染策略、目标变换与学习/验证曲线、稳健评估与异常代价）
  - **一句话结论**: 本章叙事扎实、资产丰富，建议补“工程化与评估规范”以提升生产可落地性。

#### 证据与问题（按小节）
- 5_1_business_challenge（`ch05/5_1_business_challenge.qmd`）
  - 亮点：以房价回归切题，三维点云直观展示“函数拟合”的第一性视角。
  - 风险与边界：示例代码设置 `pio.renderers.default="notebook"` 在静态站点不稳定；应统一为预渲染 HTML 资产（Plotly）并 iframe 引用。

- 5_2_linear_regression（`ch05/5_2_linear_regression.qmd`）
  - 亮点：最小二乘几何/物理直觉清晰；交互资产 `linear_reg_demo.html` 支持“玩起来”。
  - BP 建议：
    - 指出 OLS 对离群点敏感，鼓励配套鲁棒指标（MAE）与可视化残差图；
    - 工程实现建议采用 `Pipeline(StandardScaler(), LinearRegression())`（避免泄漏）。

- 5_3_overfitting_regularization（`ch05/5_3_overfitting_regularization.qmd`）
  - 亮点：`overfitting_polynomial_log_mse.html`、`regularization_fixed15_paths.html` 直观阐释 U 形曲线与 Ridge/Lasso/ENet 区别。
  - BP 建议：
    - 补充 `ElasticNetCV`/`LassoCV` 的交叉验证路径注意点（`n_alphas` 将在 1.9 移除，避免显式依赖；支持 `sample_weight`；float32 兼容性已改进）；
    - 高相关特征时优先考虑 `ElasticNetCV`（`l1_ratio` 联合寻优）。

- 5_4_xai（`ch05/5_4_xai.qmd`）
  - 亮点：从“内在白盒（系数）”到“事后归因（SHAP）”的框架清晰，结合力图/摘要图解释路径可迁移到后续章节。
  - BP 建议：
    - 线性模型优先使用系数与 `permutation_importance` 作为轻量全局解释；SHAP 计算需提示性能与背景分布依赖，线性模型可用 LinearExplainer；
    - 在可视化中补充基准值/单位与特征缩放说明（确保业务可读性）。

- 5_5_vibe_coding_practice（`ch05/5_5_vibe_coding_practice.qmd`）
  - 亮点：弃用 Boston 数据集并改用 California，符合伦理与 sklearn 1.2+ 政策；流程涵盖标准化、`LassoCV`、SHAP 全链路。
  - BP 建议：
    - 强化 `Pipeline` 与 `ColumnTransformer` 模式以防止数据泄漏；
    - 引入 `TransformedTargetRegressor`（对偏态目标如房价使用 log/QuantileTransformer 提升线性可建模性）；
    - 结合 `LearningCurveDisplay/ValidationCurveDisplay` 诊断偏差/方差与超参敏感性；
    - 业务对齐：按“非对称成本”设计自定义打分或使用 `Quantile`/`Pinball loss` 评估上/下偏差风险。

- 5_6_exercises（`ch05/5_6_exercises.qmd`）
  - 亮点：比较 Lasso/Ridge 系数稀疏与收缩、撰写 XAI 报告、失败模式清单，贴合“从技术到商业”的迁移。
  - 建议：给出评分 Rubric（技术正确性/可解释性/商业建议可执行性/复现性）与最小提交物模板。

#### 修订建议与优先级
- **P0**（发布阻断/稳定性）
  - 统一互动可视化为“预渲染 HTML + iframe”模式，移除 `pio.renderers.default="notebook"`；检查 `book/assets/ch05/*.html` 链接可用与自适应高度。

- **P1**（工程与评估规范）
  - 在 5.2/5.5 补充 `Pipeline/ColumnTransformer` 推荐写法与避免泄漏说明；
  - 在 5.5 增补 `TransformedTargetRegressor` 示例与适用性说明（对偏态目标更稳健）；
  - 在 5.3 强调 `ElasticNetCV` 双参联合寻优与高相关特征的稳定性优势；
  - 增补 `LearningCurveDisplay`/`ValidationCurveDisplay` 用于偏差/方差诊断与模型选择；
  - 在 XAI 小节补 `permutation_importance` 的轻量全局重要性示例（与 SHAP 形成互补）。

- **P2**（打磨与一致性）
  - 残差图/误差分布图、评价指标对齐（R2/MSE/MAE/MAPE 的业务解读）；
  - 在实践环节明确“非对称代价/量化目标”的配置方式（自定义 scorer 或量化回归）。

#### 资源与可复现性
- 代码/数据/环境
  - 建议在 `book/code/ch05/` 提供：
    1) `Pipeline(StandardScaler(), LinearRegression())` 与残差分析最小示例；
    2) `ElasticNetCV`（联合寻优 `alpha`+`l1_ratio`）与系数路径/学习曲线；
    3) `TransformedTargetRegressor`（log/QuantileTransformer）对比未变换基线；
    4) `permutation_importance` 与 SHAP 摘要图对照。
- 资产检查
  - 现有：`linear_reg_demo.html`、`overfitting_polynomial_log_mse.html`、`regularization_fixed15_paths.html`；
  - 待检：各 iframe 在 Quarto 静态站点显示高度与移动端适配；外链与脚本体积。

#### 术语与引用（访问日期 2025-08）
- 线性模型与正则化：`LinearRegression`、`Ridge/RidgeCV`、`Lasso/LassoCV`、`ElasticNet/ElasticNetCV`（含 `l1_ratio` 联合寻优、`n_alphas` 弃用动态）；
- 预处理与流水线：`Pipeline/make_pipeline`、`ColumnTransformer`、`PolynomialFeatures`；
- 目标变换：`TransformedTargetRegressor`（log/QuantileTransformer）；
- 解释与重要性：`inspection.permutation_importance`、`PartialDependenceDisplay`（注意 API 更新与 dtype 要求）；
- 模型选择与学习/验证曲线：`LearningCurveDisplay`、`ValidationCurveDisplay`；
- 交叉验证与评分：`cross_val_score/cross_validate`、多指标与自定义 scoring。

（上述均对齐 scikit-learn 1.7.x 文档）

#### 状态与动作
- 审核状态：已完成
- 责任人 / 截止：AI 助理 / 本周
- 变更记录：新增 FP/VC/BP 评分；提出 Pipeline/目标变换/学习曲线/轻量 XAI 等工程化补强；统一交互资产的发布策略。