### ch14 审阅报告（已完成）

#### 概览
- 章节：ch14（生成式智能：当机器开始“创造”）
- 小节清单与定位：
  - ch14/14_1_business_challenge.qmd
  - ch14/14_2_generative_adversarial_networks.qmd
  - ch14/14_3_diffusion_models.qmd
  - ch14/14_4_autoregressive_models.qmd
  - ch14/14_5_vibe_coding_practice.qmd
  - ch14/14_6_exercises.qmd
- 总体评估：
  - FP：3/4（GAN 对抗博弈→Diffusion 加噪/去噪→自回归与解码策略的动机链条清晰；可补训练稳定性/复杂度与评估边界）
  - VC：4/4（业务挑战与可控生成实践贴合；有交互动画位点与对比实验设计）
  - BP：3/4（建议补 SOTA 训练/推理与安全合规、评估指标、硬件与复现细节；完善实践代码要点）
  - 一句话结论：本章完成“生成范式”心智模型构建，补工程化（稳定训练/采样管线/评估&合规）细节即可用于生产视角教学。

#### 证据与问题（按小节）
- 14_1 商业挑战（`ch14/14_1_business_challenge.qmd`）
  - 认可点：图像设计生成与营销文案生成的双场景牵引合理，明确“判别→生成”的范式跳转。
  - 建议（BP）：提示合规与版权（训练数据许可、生成内容版权归属、潜在水印/标识）、敏感内容规避与审核流程；补充生成式评估方式（人评/偏好对比/任务约束达成率）。

- 14_2 GAN（`ch14/14_2_generative_adversarial_networks.qmd`）
  - 认可点：G/D 对抗与交替训练流程解释清楚；纳什均衡直觉准确。
  - P1（稳定训练与现代实践）：
    - 损失与正则：WGAN/WGAN-GP、Hinge Loss、谱归一化（Spectral Norm）、实例噪声（Instance Noise）、TTUR；
    - 架构：DCGAN 规范、StyleGAN/StyleGAN2 逐步生长与风格空间；
    - 评估：FID/IS/Precision-Recall for GANs 与人评结合；
    - 资产：文中“交互动画 TODO”目前打印占位符，建议补一维/二维分布拟合可视化或移除 TODO。

- 14_3 扩散模型（`ch14/14_3_diffusion_models.qmd`）
  - 认可点：前向加噪与反向去噪直觉、U-Net 噪声预测器、迭代“雕刻”流程讲解到位；文本条件引导（Classifier-free guidance）动机准确。
  - P1（BP）：
    - 推理调度器：DDPM/DDIM、PNDM、Euler(a)/Euler、DPM-Solver++、UniPC 的速度-质量权衡；
    - 生成控制：guidance scale、负面提示（negative prompts）、ControlNet/LoRA；
    - 运行：bf16/fp16、xFormers/Flash Attention（如适用）、显存与分辨率权衡、VAE 量化伪影；
    - 安全：NSFW/水印检查器、版权与素材来源声明（LAION 等）；
    - 评估：CLIPScore/人评；
    - 参考 `diffusers` 标准管线与安全检查器开关。

- 14_4 自回归模型（`ch14/14_4_autoregressive_models.qmd`）
  - 认可点：Masked Self-Attention 与解码策略（Greedy/Beam/Temperature/Nucleus）阐述清晰；风格与随机性的权衡思路合理。
  - 建议（BP）：
    - 采样：top_k/top_p/temperature 的差异与组合、repetition_penalty、no_repeat_ngram；
    - 生成长度与停用：`max_new_tokens`、`eos_token_id`、截断与后处理；
    - 安全合规：敏感词/提示注入与输出过滤策略。

- 14_5 实践（`ch14/14_5_vibe_coding_practice.qmd`）
  - 认可点：围绕 Qwen3-0.6B 进行 temperature/top_p 对比实验，贴合“创造力旋钮”。
  - P0（BP 纠偏/补强）：
    - 设备与精度：`bfloat16` 需硬件支持，不支持时回退 `float16` 或 `float32`；
    - 生成：显式 `do_sample=True`、设置 `eos_token_id`/`max_new_tokens`、可选 `repetition_penalty`；
    - 环境：固定随机种子、`model.eval()` 与 `torch.no_grad()`；
  - P1：
    - 观测：收集长度/独特词比例/重复率等轻量指标；
    - 合规：输出内容过滤与提示词规范化；
    - 备注：如需 `trust_remote_code=True`/`device_map="auto"`，需在文中注明风险与前置条件。

- 14_6 练习（`ch14/14_6_exercises.qmd`）
  - 认可点：GAN vs Diffusion 概念辨析、自回归“知识”与“创造”的哲学讨论，以及“人类判别器 vs 生成器”对抗式练习设计到位。
  - 建议：增加“偏好评估（pairwise）与 A/B 测试设计”、多维安全评估（毒性/偏见/事实性）与审计日志要求。

#### 修订建议与优先级
- P0（阻断/高风险）
  - 在 14.5 示例中补齐生成与推理规范（精度回退、`do_sample`、`eos`/长度/重复惩罚、`eval()/no_grad()`、随机种子）。

- P1（重要提升）
  - GAN 稳定训练：引入 WGAN-GP/Hinge、谱归一化与 TTUR；
  - Diffusion 推理与控制：调度器/CFG/负面提示/ControlNet/LoRA、`diffusers` 管线与安全检查；
  - 解码策略：补 `top_k` 与 `repetition_penalty` 的作用与典型配置；
  - 评估与观测：FID/IS/PR、CLIPScore、人评面板与偏好对比；
  - 合规与版权：训练数据来源、模型与权重许可、NSFW/水印与内容审核流程。

- P2（打磨/一致性）
  - 统一术语：G/D、判别器/生成器、谱归一化、模式崩溃、噪声预测器、调度器、CFG、top_k/top_p/temperature、repetition penalty；
  - 资产：若保留 GAN 动画占位符，应替换为可运行交互或移除 TODO。

#### 资源与可复现性
- 依赖建议：`torch`（≥2.3）、`transformers`、`diffusers`、`accelerate`、`xformers`（可选）、`safetensors`、`matplotlib`、`scikit-image`（评估可选）。
- 运行与复现：固定随机种子；记录采样参数与调度器；保存生成样本与配置；GPU 显存与时间预算说明；
- 评估：小规模人评流程模板与指标面板（多样性、连贯性、符合度）。

#### 术语与引用（访问日期 2025-08）
- GAN：Goodfellow et al., 2014；WGAN/WGAN-GP；StyleGAN/StyleGAN2（Karras et al.）
- 扩散模型：DDPM（Ho et al., 2020）、DDIM（Song et al., 2020）、DPM-Solver++（Lu et al.）；Stable Diffusion（Rombach et al., 2022）
- Diffusers（HF）：https://huggingface.co/docs/diffusers
- Transformers 生成与采样：
  - https://huggingface.co/docs/transformers/main/en/generation_strategies
- 评估与指标：
  - FID/IS/PR/CLIPScore 综述（参考各论文与实现）；
- 安全与合规：
  - Diffusers Safety Checker、Invisible Watermark 参考实现与许可说明。

#### 状态与动作
- 审核状态：已完成（6/6）
- 后续动作：
  - P0：完善 14.5 生成脚本的推理/参数与复现细节；
  - P1：补 GAN 稳定训练与 Diffusion 推理/控制/评估/合规小节；
  - P2：统一术语并替换/移除 GAN 动画占位符。

