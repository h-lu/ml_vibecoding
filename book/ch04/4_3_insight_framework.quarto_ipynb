{
  "cells": [
    {
      "cell_type": "markdown",
      "metadata": {},
      "source": [
        "---\n",
        "title: \"4.3 从“是什么”到“为什么”：洞察提炼框架\"\n",
        "---\n",
        "\n",
        "我们已经知道，数据可视化能帮助我们的大脑快速识别模式。但发现模式本身并不是终点，它仅仅是“侦探工作”的开始。一个初级分析师会向老板汇报：“老板，我发现周三的销售额最低。”然后等待老板的下一个指令。而一个高级的系统设计师则会进一步思考：“为什么周三最低？这对我们的业务意味着什么？我们应该采取什么行动？”\n",
        "\n",
        "为了帮助你建立这种从“发现”到“行动”的思维习惯，我们引入一个简单而强大的**三步洞察法**。每当你面对一张图表时，强迫自己完整地走完这三步，你的分析深度将远超常人。\n",
        "\n",
        "### 三步洞察法 (Observe - Question - Act)\n",
        "\n",
        "1.  **观察 (Observe): 描述图表显示的核心事实**\n",
        "    -   **任务**: 用最客观、最中立的语言，陈述你从图表中看到的最显著的模式、趋势或异常。在这一步，**禁止做任何解释或猜测**。\n",
        "    -   **示例**:\n",
        "        -   *（错误示范）*: “周三的生意很差。” (这是结论，不是观察)\n",
        "        -   *（正确示范）*: “我观察到，在一周七天中，周三的日均销售额是最低点，比周二下降了约20%。”\n",
        "\n",
        "2.  **提问 (Question): 探索该事实背后的原因和意义**\n",
        "    -   **任务**: 针对你的观察，提出一系列“为什么”和“所以呢”的问题。这是分析的核心，是你从数据表象深入到商业实质的关键环节。\n",
        "    -   **示例**:\n",
        "        -   **为什么会这样 (Why)?**\n",
        "            -   “为什么偏偏是周三？是因为我们常规的周末促销活动在周二结束，导致周三成为促销空档期吗？”\n",
        "            -   “是不是我们的主要竞争对手，每周三都会推出力度很大的促销活动，抢走了我们的客户？”\n",
        "            -   “我们的目标客户群体（例如大学生）是不是在周三有特殊的日程安排（例如课程最多）导致他们无法购物？”\n",
        "        -   **所以呢 (So What)?**\n",
        "            -   “这个周三低谷对我们整个月的销售目标达成有多大影响？”\n",
        "            -   “这个现象是最近才出现的，还是一直都存在？”\n",
        "\n",
        "3.  **行动 (Act): 提出下一步的具体建议**\n",
        "    -   **任务**: 基于你的提问和初步假设，设计出可以验证假设或解决问题的具体、可执行的下一步行动。\n",
        "    -   **示例**:\n",
        "        -   **数据验证行动**:\n",
        "            -   “我需要立刻去核查公司过去一年的营销日历，确认周三是否确实是促销活动的空档期。”\n",
        "            -   “我建议对主要竞争对手的网站和社交媒体进行快速分析，特别是他们周三的活动情况。”\n",
        "        -   **商业实验建议**:\n",
        "            -   “我们可以设计一个为期四周的A/B测试：在接下来的四个周三，针对部分用户推出一个‘周三会员专属闪购’活动，观察它是否能有效提升当天的销售额。”\n",
        "\n",
        "### 案例分析：应用三步法解决 AOV 下降问题\n",
        "\n",
        "让我们回到本章开篇的商业挑战：**电商公司的平均客单价 (AOV) 下降了**。作为数据侦探，你通过 Vibe Coding 让 AI 快速生成了一系列图表。其中一张图表引起了你的注意："
      ],
      "id": "620d507f"
    },
    {
      "cell_type": "code",
      "metadata": {},
      "source": [
        "#| label: fig-aov-boxplot\n",
        "#| fig-cap: 不同商品类别的平均客单价 (AOV) 分布箱形图\n",
        "#| echo: false\n",
        "#| eval: true\n",
        "\n",
        "import pandas as pd\n",
        "import numpy as np\n",
        "import plotly.express as px\n",
        "import plotly.io as pio\n",
        "pio.renderers.default = \"notebook\"\n",
        "\n",
        "# 生成模拟数据\n",
        "np.random.seed(123)\n",
        "categories = ['电子产品', '家居用品', '服装配饰', '食品饮料']\n",
        "data = {\n",
        "    'Category': np.random.choice(categories, 500, p=[0.2, 0.3, 0.3, 0.2]),\n",
        "    'AOV': []\n",
        "}\n",
        "for cat in data['Category']:\n",
        "    if cat == '电子产品':\n",
        "        data['AOV'].append(np.random.normal(250, 50))\n",
        "    elif cat == '家居用品':\n",
        "        data['AOV'].append(np.random.normal(80, 20))\n",
        "    elif cat == '服装配饰':\n",
        "        data['AOV'].append(np.random.normal(50, 15))\n",
        "    else: # 食品饮料\n",
        "        data['AOV'].append(np.random.normal(25, 8))\n",
        "\n",
        "df = pd.DataFrame(data)\n",
        "df['AOV'] = df['AOV'].round(2)\n",
        "df = df[df['AOV'] > 0]\n",
        "\n",
        "\n",
        "fig = px.box(df, x='Category', y='AOV',\n",
        "             title='不同商品类别的平均客单价 (AOV) 分布',\n",
        "             labels={'Category': '商品类别', 'AOV': '平均客单价 ($)'},\n",
        "             points=\"all\"\n",
        "            )\n",
        "fig.update_layout(width=700, height=450)\n",
        "fig.show()"
      ],
      "id": "fig-aov-boxplot",
      "execution_count": null,
      "outputs": []
    },
    {
      "cell_type": "markdown",
      "metadata": {},
      "source": [
        "现在，让我们应用“三步洞察法”来分析这张图：\n",
        "\n",
        "\n",
        "**第一步：观察 (Observe)**\n",
        "\n",
        "“我观察到，‘电子产品’类别的平均客单价（中位数约 \\$250）远高于其他所有类别。同时，虽然‘电子产品’的客单价最高，但其数据点的数量似乎比‘家居用品’和‘服装配饰’要少。”\n",
        "\n",
        "\n",
        "**第二步：提问 (Question)**\n",
        "\n",
        "-   **为什么？**:\n",
        "    -   “整体AOV的下降，会不会不是因为所有品类的价格都降了，而是因为**销售结构**发生了变化？例如，是不是上个季度我们卖出的高价值‘电子产品’订单**占比**减少了，而低价值的‘服装’或‘家居’订单**占比**增加了？”\n",
        "    -   “为什么‘电子产品’的销量会下降？是我们的库存不足，还是竞争对手推出了更有吸引力的电子产品促销？”\n",
        "-   **所以呢？**:\n",
        "    -   “如果真的是销售结构变化导致的 AOV 下降，那么公司的整体利润率可能也受到了影响，因为电子产品通常利润率也更高。这个问题比单纯的平均价格下降更严重。”\n",
        "\n",
        "\n",
        "**第三步：行动 (Act)**\n",
        "\n",
        "-   **数据验证**:\n",
        "    -   “我需要立刻计算上个季度和去年同期，各个商品类别的**销售额占比**和**订单量占比**，制作一张饼图或堆叠条形图来验证我的‘销售结构变化’假设。”\n",
        "-   **商业建议**:\n",
        "    -   “如果假设被证实，我建议市场部和采购部立即复盘上个季度的电子产品营销策略和供应链情况，找出导致其销售占比下降的具体原因，并尽快制定针对性的提升方案。”\n",
        "\n",
        "\n",
        "通过这个框架，我们从一张静态的图表出发，形成了一个有理有据、可执行的商业分析闭环。这就是数据侦探的核心工作流程：**将数据模式，转化为商业洞察，最终驱动商业行动。**"
      ],
      "id": "7e7e0d4e"
    }
  ],
  "metadata": {
    "kernelspec": {
      "name": "python3",
      "language": "python",
      "display_name": "Python 3 (ipykernel)",
      "path": "/Users/wangxq/.pyenv/versions/3.9.13/share/jupyter/kernels/python3"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 5
}